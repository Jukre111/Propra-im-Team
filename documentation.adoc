# Abschlussprojekt

## Grundsätzliches

* Pair-programming.
* Morgens Gruppenmeeting.
* Retrospektiv-Meeting am Ende der Woche.
* Kein TDD, aber Test möglichst zeitnah schreiben.
* In jeden Commit schreiben, welche zwei Leute das gemacht haben(Vorname).
* Aufgaben die aktuell bearbeitet werden, bitte in der Datei aufgabenverteilung.adoc
schreiben (mit Namen)


## Codeformatierung & Richtlinien

* Commits im imperativ und auf Englisch.
* Code auf Englisch, CamelCase verwenden.
* Tabs werden verwendet.
* Checkstyle verwenden.
* FindBugs wird benutzt und Fehler zeitnah korrigiert.

## Aufgaben:
* Login
* Travis
* FindBugs
* Docker & Dockercompose
* Datenbank (Postgres)
* Benutzerkonto
* Suche (optional)
* Person anlegen
* Person bearbeiten
* Person löschen
* Artikel anlegen
* Artikel bearbeiten
* Artikel löschen
* Schnittstelle zu ProPay

## Model Datenstrukturen
* User bestehen aus:
. username : String (id)
** user haben eindeutige Usernamen, die in der Datenbank als Id verwendet werden.
. password : String
. role : String
** Es gibt die Rollen Admin und User.
*** Admins können die Konfliktlösestelle in ihrem Account aufrufen, für User wird der entsprechende
Button nicht dargestellt.
. lastname : String
. forename : String
. email : String
. birthdate : LocalDate
. address : Address
. borrowedItems :


 Die Items, die dem User gehoeren werden hier nicht gespeichert, stattdessen wird in jedem Item der Besitzer
vermerkt.

* Item
. id : Long
** ids werden von der Datenbank generiert.
. name : String
. description : String
. rental : int
. deposit : int
. Availability : List periods
** Hier werden alle Zeiträume gespeichert, in denen das Item verliehen ist.
. lender : User


* Request
. id : Long
** ids werden von Datenbank generiert.
. Zeitraum : period
. requester : User
** User der ausleihen möchte.

* BorrowedItems
. id : Long
. item : Item
** Item das ausgeliehen wird.
. request : Request
** request der akzeptiert wurde, sodass das Item jetzt ausgeliehen ist.


## Erläuterung der Model Datenstruktur
* User:
. Jeder Benutzer der Website wird als User Objekt gespeichert.
. Die ID der User-Klasse ist der username, d.h. er kann nur von einem Account verwendet werden.
* Address:
. Jede Adresse eines Benutzers wird als Objekt der Klasse Address im User gespeichert.
. Address ist embeddable, damit Benutzer mit derselben Adresse diese speichern können.
* Item:
. Jeder zur Vermietung eingestellte Artikel wird als Objekt der Klasse Item gespeichert.
. Die ID wird automatisch generiert, um die Artikel eindeutig voneinannder unterscheiden zu können.
* Message:
. Jede Nachricht (User -> User oder System -> User) wird als Objekt der Klasse Message gespeichert.
. Die ID wird automatisch generiert und ist eindeutig.
. Jede Nachricht ist dem Artikel zugeordnet, um den es geht.
* Reservation:
. Klasse/Modell wird verwendet um die Json Dateien zu verarbeiten.
* Account:
. Klasse/Modell wird verwendet um die Json Dateien zu verarbeiten.

## Datenbank fuellen
Da die Registrierung optional ist, speichern wir beim Starten des Programms ueber
den DatabaseInitializer mehrere User und Items in der Datenbank. Falls spaeter noch
Zeit ist, implementieren wir die Registrierung und aendern dies.


## Struktur der Website
* Base-Site
. Banner
* BaseWithSearchBar-Site
. Banner
. Nachrichten (Button)
. Account (Button)
. Suche in Angebote (Suchfeld -> Button los)
* Login-Site
. Benutzername (Input)
. Passwort (Input)
. Einloggen (Button)
. Registrieren (Link)
* Index-Site
. BaseWithSearchBar
. Liste Angebote (Details anfordern -> Button)
. Angebotliste (Anfrage auf Details -> Button)
* Account-Site
. BaseWithSearchBar
. Artikel einstellen (Button)
. Liste verliehener Items (bearbeiten, loeschen -> Buttons)
. Liste geliehener Items (abgeben -> Button)
. Clearing Stelle (Button)
* Mailbox-Site
. BaseWithSearchBar
. Liste an erhaltenen Nachrichten
. Nachricht anzeigen (Button pro Nachricht)
. E-mail schreiben (Button)
* DisplayMessage-Site
. BaseWithSearchBar
. Sender (Text)
. Betreff (Text)
. Inhalt (Text)
* WriteMessage-Site
. BaseWithSearchBar
. Empfängerfeld (Input)
. Itemauswahl (DropList)
. Betreff (Input)
. Inhalt (Input)
. Abbrechen (Button)
. Senden (Button)


## Erläuterung der Website Struktur
* Login:
. Wird aufgerufen, wenn man noch nicht eingeloggt ist.
. Man wird auch hierherweitergeleitet, solang man nicht eingeloggt ist.
* localhost:8080/
. öffnet index.html
* localhost:8080/account
. Öffnet account.html mit Daten des Nutzers.
* localhost:8080/details
. Wenn Item existiert/gefunden wird, wird details.html mit den Daten des Items geöffnet.
. Sonst wird eine RuntimeException geworfen.
* localhost:8080/newItem
. Öffnet newItem.html

## Architektur
GUI <-> Controller <-> Logik <-> Model <-> Datenbank <- DatabaseInitializer

